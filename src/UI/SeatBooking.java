/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package UI;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

/**
 *
 * @author hirun
 */
public class SeatBooking extends javax.swing.JFrame {

    private String username;
    String url = "jdbc:mysql://localhost:3306/BusManagement";
    String username1 = "root";
    String password = "root123";

    /**
     * Creates new form SeatBooking
     */
    private void refreshActiveBooking() {

        try {
            //activeBooking.setRowCount(0);
            DefaultTableModel model = (DefaultTableModel) jTable3.getModel();

            model.setRowCount(0);
            Class.forName("com.mysql.jdbc.Driver");
            String database = "jdbc:mysql://localhost:3306/BusManagement";
            Connection con = DriverManager.getConnection(database, "root", "root123");

            String sql = "SELECT b.bookingId,s.schedule_date ,s.depature_Time ,s.Depature ,s.Arrival ,b.seatNo,st.Bus_No,st.Status  FROM booking b JOIN Schedule s ON b.ScheduleId = s.scheduleId JOIN Seat st ON st.Bus_No = s.Bus_No AND st.SeatNo = b.seatNo LEFT JOIN cancellation c ON c.bookingId = b.bookingId WHERE c.bookingId IS NULL AND st.Status = 'booked';";

            PreparedStatement st = con.prepareStatement(sql);
            ResultSet r = st.executeQuery();
//
//            while (r.next()) {
//                String bookingId = String.valueOf(r.getInt("bookingId"));
//                String departureDate = r.getString("schedule_date");
//                String departureTime = r.getString("depature_Time");
//                String departure = r.getString("Depature");
//                String arrival = r.getString("Arrival");
//                String seatNo = String.valueOf(r.getInt("seatNo"));
//                String Bus_no = r.getString("Bus_No");
//                String seatStatus = r.getString("Status");
//
//                // Do something with the retrieved data, such as adding it to a table model
//                // For example:
//                String[] rowData = {bookingId, departureDate, departureTime, departure, arrival, seatNo, Bus_no, seatStatus};
//                // Add rowData to your table model
//                activeBooking.addRow(rowData);
////
//            }

            // DefaultTableModel model = (DefaultTableModel) jTable6.getModel();
            NewClass.fillTheTable(model, r);

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
            e.printStackTrace();
        }

    }

    public SeatBooking() {
        initComponents();
    }

    public SeatBooking(String username) {
        initComponents();
        this.username = username;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        panelRound1 = new UI.Images.PanelRound();
        panelRound2 = new UI.Images.PanelRound();
        jLabel7 = new javax.swing.JLabel();
        panelRound3 = new UI.Images.PanelRound();
        jLabel8 = new javax.swing.JLabel();
        jButton5 = new javax.swing.JButton();
        MainPanel = new UI.Images.PanelRound();
        searchPane = new UI.Images.PanelRound();
        depatureLocation = new javax.swing.JComboBox<>();
        arrivalLocation = new javax.swing.JComboBox<>();
        journeyDate = new com.github.lgooddatepicker.components.DatePicker();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jButton9 = new javax.swing.JButton();
        main = new javax.swing.JPanel();
        child1 = new javax.swing.JPanel();
        jLabel22 = new javax.swing.JLabel();
        child2 = new javax.swing.JPanel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jLabel5 = new javax.swing.JLabel();
        jTextField1 = new javax.swing.JTextField();
        jButton10 = new javax.swing.JButton();
        panelRound4 = new UI.Images.PanelRound();
        choosePane = new UI.Images.PanelRound();
        jLabel6 = new javax.swing.JLabel();
        jSpinner1 = new javax.swing.JSpinner();
        jLabel19 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        jTable2 = new javax.swing.JTable();
        jLabel18 = new javax.swing.JLabel();
        jComboBox1 = new javax.swing.JComboBox<>();
        jButton3 = new javax.swing.JButton();
        jButton8 = new javax.swing.JButton();
        confirmationPane = new UI.Images.PanelRound();
        jLabel23 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel17 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        confirmationDepature = new javax.swing.JLabel();
        confirmationArrival = new javax.swing.JLabel();
        confirmationDepatureDate = new javax.swing.JLabel();
        confirmationDepatureTime = new javax.swing.JLabel();
        confirmationPassengerName = new javax.swing.JLabel();
        confirmationPassengerMobile = new javax.swing.JLabel();
        confirmationBusNo = new javax.swing.JLabel();
        confirmationSeatNo = new javax.swing.JLabel();
        confirmationFare = new javax.swing.JLabel();
        jButton6 = new javax.swing.JButton();
        jButton7 = new javax.swing.JButton();
        jLabel25 = new javax.swing.JLabel();
        cancellPane = new UI.Images.PanelRound();
        jLabel20 = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        jTable3 = new javax.swing.JTable();
        jLabel21 = new javax.swing.JLabel();
        jTextField3 = new javax.swing.JTextField();
        jButton4 = new javax.swing.JButton();
        jLabel26 = new javax.swing.JLabel();
        jLabel27 = new javax.swing.JLabel();
        jTextField4 = new javax.swing.JTextField();
        jTextField5 = new javax.swing.JTextField();
        jLabel24 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setPreferredSize(new java.awt.Dimension(950, 600));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel1.setBackground(new java.awt.Color(36, 36, 36));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel1.setText("SeatBooking");
        jLabel1.setFont(new java.awt.Font("Segoe UI", 1, 40)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(100, 204, 197));
        jPanel1.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(330, 10, -1, -1));

        panelRound1.setBackground(new java.awt.Color(255, 255, 255));
        panelRound1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        panelRound2.setBackground(new java.awt.Color(153, 153, 153));
        panelRound2.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelRound2MouseClicked(evt);
            }
        });

        jLabel7.setText("Booking");
        jLabel7.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N

        javax.swing.GroupLayout panelRound2Layout = new javax.swing.GroupLayout(panelRound2);
        panelRound2.setLayout(panelRound2Layout);
        panelRound2Layout.setHorizontalGroup(
            panelRound2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelRound2Layout.createSequentialGroup()
                .addGap(18, 18, 18)
                .addComponent(jLabel7)
                .addContainerGap(19, Short.MAX_VALUE))
        );
        panelRound2Layout.setVerticalGroup(
            panelRound2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelRound2Layout.createSequentialGroup()
                .addGap(41, 41, 41)
                .addComponent(jLabel7)
                .addContainerGap(44, Short.MAX_VALUE))
        );

        panelRound1.add(panelRound2, new org.netbeans.lib.awtextra.AbsoluteConstraints(25, 69, 110, 110));

        panelRound3.setBackground(new java.awt.Color(153, 153, 153));
        panelRound3.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                panelRound3MouseClicked(evt);
            }
        });

        jLabel8.setText("Cancel");
        jLabel8.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N

        javax.swing.GroupLayout panelRound3Layout = new javax.swing.GroupLayout(panelRound3);
        panelRound3.setLayout(panelRound3Layout);
        panelRound3Layout.setHorizontalGroup(
            panelRound3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelRound3Layout.createSequentialGroup()
                .addGap(25, 25, 25)
                .addComponent(jLabel8)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        panelRound3Layout.setVerticalGroup(
            panelRound3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelRound3Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jLabel8)
                .addGap(41, 41, 41))
        );

        panelRound1.add(panelRound3, new org.netbeans.lib.awtextra.AbsoluteConstraints(25, 218, 110, 110));

        jButton5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/BackWithBoarder.png"))); // NOI18N
        jButton5.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton5.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jButton5MouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                jButton5MouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                jButton5MouseExited(evt);
            }
        });
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });
        panelRound1.add(jButton5, new org.netbeans.lib.awtextra.AbsoluteConstraints(25, 363, 100, 35));

        jPanel1.add(panelRound1, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 100, 160, 440));

        MainPanel.setBackground(new java.awt.Color(255, 255, 255));
        MainPanel.setLayout(new java.awt.CardLayout());

        searchPane.setBackground(new java.awt.Color(255, 255, 255));
        searchPane.setPreferredSize(new java.awt.Dimension(32767, 32767));
        searchPane.setLayout(null);

        depatureLocation.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Colombo", "Kandy", "Galle", "Matara" }));
        depatureLocation.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        depatureLocation.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                depatureLocationActionPerformed(evt);
            }
        });
        searchPane.add(depatureLocation);
        depatureLocation.setBounds(90, 30, 130, 31);

        arrivalLocation.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Kandy", "Galle", "Matara", "Colombo" }));
        arrivalLocation.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        searchPane.add(arrivalLocation);
        arrivalLocation.setBounds(280, 30, 130, 31);

        journeyDate.setBackground(new java.awt.Color(255, 255, 255));
        journeyDate.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        searchPane.add(journeyDate);
        journeyDate.setBounds(540, 30, 170, 30);

        jLabel2.setText("From");
        jLabel2.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        searchPane.add(jLabel2);
        jLabel2.setBounds(30, 30, 52, 25);

        jLabel3.setText("To");
        jLabel3.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        searchPane.add(jLabel3);
        jLabel3.setBounds(240, 30, 37, 25);

        jLabel4.setText("Journey Date");
        jLabel4.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        searchPane.add(jLabel4);
        jLabel4.setBounds(430, 30, 115, 25);

        jButton9.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/search (1).png"))); // NOI18N
        jButton9.setText("Search");
        jButton9.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton9.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        jButton9.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton9ActionPerformed(evt);
            }
        });
        searchPane.add(jButton9);
        jButton9.setBounds(310, 80, 107, 32);

        main.setBackground(new java.awt.Color(153, 153, 153));
        main.setOpaque(false);
        main.setLayout(new java.awt.CardLayout());

        child1.setBackground(new java.awt.Color(153, 153, 153));
        child1.setOpaque(false);
        child1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel22.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/seatbookingpic.png"))); // NOI18N
        child1.add(jLabel22, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 30, -1, -1));

        main.add(child1, "card2");

        child2.setBackground(new java.awt.Color(153, 153, 153));
        child2.setOpaque(false);
        child2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        jTable1.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                jTable1MouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(jTable1);

        child2.add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 20, 670, 240));

        jLabel5.setText("Shedule id");
        jLabel5.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        child2.add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 270, -1, -1));

        jTextField1.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });
        child2.add(jTextField1, new org.netbeans.lib.awtextra.AbsoluteConstraints(240, 265, 100, -1));

        jButton10.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/search (1).png"))); // NOI18N
        jButton10.setText("Search");
        jButton10.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jButton10.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        jButton10.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton10ActionPerformed(evt);
            }
        });
        child2.add(jButton10, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 265, -1, -1));

        main.add(child2, "card3");

        searchPane.add(main);
        main.setBounds(20, 120, 690, 320);

        panelRound4.setBackground(new java.awt.Color(153, 153, 153));
        panelRound4.setLayout(new java.awt.CardLayout());
        searchPane.add(panelRound4);
        panelRound4.setBounds(20, 120, 690, 320);

        MainPanel.add(searchPane, "card2");

        choosePane.setBackground(new java.awt.Color(255, 255, 255));
        choosePane.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel6.setText("Choose no of seats");
        jLabel6.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
        choosePane.add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(190, 30, -1, -1));

        jSpinner1.setModel(new javax.swing.SpinnerNumberModel(1, // initial value
            1,  // minimum value
            50, // maximum value
            1)); // step siz
    jSpinner1.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    choosePane.add(jSpinner1, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 30, -1, -1));

    jLabel19.setText("Select seats from the table");
    jLabel19.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    choosePane.add(jLabel19, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 80, -1, -1));

    jTable2.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null}
        },
        new String [] {
            "Title 1", "Title 2", "Title 3", "Title 4"
        }
    ));
    jTable2.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jTable2MouseClicked(evt);
        }
    });
    jScrollPane2.setViewportView(jTable2);

    choosePane.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 120, 500, 278));

    jLabel18.setText("Seat numbers");
    jLabel18.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    choosePane.add(jLabel18, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 430, -1, -1));

    jComboBox1.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    choosePane.add(jComboBox1, new org.netbeans.lib.awtextra.AbsoluteConstraints(210, 425, 130, -1));

    jButton3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/booking.png"))); // NOI18N
    jButton3.setText("Reseve");
    jButton3.setBackground(new java.awt.Color(0, 0, 0));
    jButton3.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
    jButton3.setForeground(new java.awt.Color(255, 255, 255));
    jButton3.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jButton3MouseClicked(evt);
        }
    });
    jButton3.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton3ActionPerformed(evt);
        }
    });
    choosePane.add(jButton3, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 425, 126, -1));

    jButton8.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/BackWithBoarder.png"))); // NOI18N
    jButton8.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
    jButton8.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jButton8MouseClicked(evt);
        }
        public void mouseEntered(java.awt.event.MouseEvent evt) {
            jButton8MouseEntered(evt);
        }
        public void mouseExited(java.awt.event.MouseEvent evt) {
            jButton8MouseExited(evt);
        }
    });
    jButton8.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton8ActionPerformed(evt);
        }
    });
    choosePane.add(jButton8, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 425, 100, 35));

    MainPanel.add(choosePane, "card3");

    confirmationPane.setBackground(new java.awt.Color(255, 255, 255));
    confirmationPane.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

    jLabel23.setText("Confirmation");
    jLabel23.setFont(new java.awt.Font("Segoe UI", 1, 20)); // NOI18N
    confirmationPane.add(jLabel23, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 10, -1, -1));

    jLabel11.setText("Depature                   :");
    jLabel11.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel11, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 50, 194, 29));

    jLabel9.setText("Arrival                       :");
    jLabel9.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 100, 194, 29));

    jLabel10.setText("Depature Date          :");
    jLabel10.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 150, 194, 29));

    jLabel12.setText("Depature Time          :");
    jLabel12.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel12, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 200, 194, 29));

    jLabel14.setText("Passenger's Name     :");
    jLabel14.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel14, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 250, 194, 29));

    jLabel13.setText("Passenger's Mobile   :");
    jLabel13.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel13, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 300, 194, 29));

    jLabel17.setText("Bus Number              :");
    jLabel17.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel17, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 350, 194, 29));

    jLabel15.setText("Seat Number             :");
    jLabel15.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel15, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 400, 194, 29));

    jLabel16.setText("Fare                            :");
    jLabel16.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(jLabel16, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 440, 194, 29));

    confirmationDepature.setText("Depature                   ");
    confirmationDepature.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationDepature, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 50, 194, 29));

    confirmationArrival.setText("Arrival");
    confirmationArrival.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationArrival, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 100, 194, 29));

    confirmationDepatureDate.setText("Depature Date");
    confirmationDepatureDate.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationDepatureDate, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 150, 194, 29));

    confirmationDepatureTime.setText("Depature Time");
    confirmationDepatureTime.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationDepatureTime, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 200, 194, 29));

    confirmationPassengerName.setText("Passenger's Name");
    confirmationPassengerName.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationPassengerName, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 250, 194, 29));

    confirmationPassengerMobile.setText("Passenger's Mobile");
    confirmationPassengerMobile.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationPassengerMobile, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 300, 194, 29));

    confirmationBusNo.setText("Bus Number");
    confirmationBusNo.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationBusNo, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 350, 194, 29));

    confirmationSeatNo.setText("Seat Number");
    confirmationSeatNo.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationSeatNo, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 400, 194, 29));

    confirmationFare.setText("Fare");
    confirmationFare.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    confirmationPane.add(confirmationFare, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 440, 194, 29));

    jButton6.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/confirm.png"))); // NOI18N
    jButton6.setText("Confirm");
    jButton6.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
    jButton6.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton6ActionPerformed(evt);
        }
    });
    confirmationPane.add(jButton6, new org.netbeans.lib.awtextra.AbsoluteConstraints(570, 420, -1, -1));

    jButton7.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/change.png"))); // NOI18N
    jButton7.setText("Change");
    jButton7.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
    jButton7.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton7ActionPerformed(evt);
        }
    });
    confirmationPane.add(jButton7, new org.netbeans.lib.awtextra.AbsoluteConstraints(430, 420, -1, -1));

    jLabel25.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/confirimpic.jpg"))); // NOI18N
    confirmationPane.add(jLabel25, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 130, -1, -1));

    MainPanel.add(confirmationPane, "card4");

    cancellPane.setBackground(new java.awt.Color(255, 255, 255));
    cancellPane.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

    jLabel20.setText("Select seat number that you need to cancel:");
    jLabel20.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    cancellPane.add(jLabel20, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 40, -1, -1));

    jTable3.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null},
            {null, null, null, null}
        },
        new String [] {
            "Title 1", "Title 2", "Title 3", "Title 4"
        }
    ));
    jTable3.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            jTable3MouseClicked(evt);
        }
    });
    jScrollPane3.setViewportView(jTable3);

    cancellPane.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(52, 80, 540, 254));

    jLabel21.setText("Selected bus number :");
    jLabel21.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    cancellPane.add(jLabel21, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 440, -1, -1));

    jTextField3.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    cancellPane.add(jTextField3, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 440, 139, -1));

    jButton4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/cancel-event.png"))); // NOI18N
    jButton4.setBackground(new java.awt.Color(51, 51, 51));
    jButton4.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    jButton4.setForeground(new java.awt.Color(255, 255, 255));
    jButton4.setLabel("Cancel");
    jButton4.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton4ActionPerformed(evt);
        }
    });
    cancellPane.add(jButton4, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 400, -1, -1));

    jLabel26.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    jLabel26.setText("Selected booking ID :");
    cancellPane.add(jLabel26, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 360, -1, -1));

    jLabel27.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    jLabel27.setText("Selected seat number :");
    cancellPane.add(jLabel27, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 400, -1, -1));

    jTextField4.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    cancellPane.add(jTextField4, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 350, 139, -1));

    jTextField5.setFont(new java.awt.Font("Segoe UI", 0, 18)); // NOI18N
    cancellPane.add(jTextField5, new org.netbeans.lib.awtextra.AbsoluteConstraints(270, 400, 139, -1));

    MainPanel.add(cancellPane, "card5");

    jPanel1.add(MainPanel, new org.netbeans.lib.awtextra.AbsoluteConstraints(197, 79, 730, 490));

    jLabel24.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/Black Back.jpg"))); // NOI18N
    jPanel1.add(jLabel24, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, -1, -1));

    getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 1140, 650));

    pack();
    setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField1ActionPerformed

    private void jTable1MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTable1MouseClicked
        int index = jTable1.getSelectedRow();
        TableModel model = jTable1.getModel();
        String scheduleId = model.getValueAt(index, 0).toString();  //email is the 1th column in the table

        int primaryKeyValue = Integer.parseInt(model.getValueAt(index, 0).toString());

        jTextField1.setText(scheduleId);
    }//GEN-LAST:event_jTable1MouseClicked

    private void jTable2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTable2MouseClicked
        int index = jTable2.getSelectedRow();
        TableModel model = jTable2.getModel();
        String SeatNo = model.getValueAt(index, 1).toString();  //email is the 1th column in the table

        int primaryKeyValue = Integer.parseInt(model.getValueAt(index, 1).toString());

        //jTextField2.setText(SeatNo);
        jComboBox1.addItem(SeatNo);
    }//GEN-LAST:event_jTable2MouseClicked

    private void jButton3MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton3MouseClicked

        try {
            String seatno = NewClass.returnColumnValue("SeatNo", jTable2);
            String Bus_no = NewClass.returnColumnValue("Bus_No", jTable2);

            // int choice = JOptionPane.showConfirmDialog(null, "Is this your final decision?", "Confirmation", JOptionPane.YES_NO_OPTION);
            // if (choice == JOptionPane.YES_OPTION) {
            try {

                Class.forName("com.mysql.jdbc.Driver");
                String database = "jdbc:mysql://localhost:3306/BusManagement";
                Connection con = DriverManager.getConnection(url, username1, password);

//                String sql = "UPDATE Seat SET Status = 'booked' where seatNo='" + seatno + "' AND Bus_No='" + Bus_no + "'";
//
//                PreparedStatement st = con.prepareStatement(sql);
//                st.executeUpdate();
                String sql2 = "SELECT * FROM seat";
                PreparedStatement st2 = con.prepareStatement(sql2);

                ResultSet r2 = st2.executeQuery();

                DefaultTableModel model2 = (DefaultTableModel) jTable2.getModel();
                NewClass.fillTheTable(model2, r2);

                con.close();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(null, e);
                e.printStackTrace();

            }

//        } else {
//            System.out.println("You selected No.");
//            // Add your logic for the No optionÂ here
//
//        }
//confirmationPassengerName.setText(User);
            try {
                Class.forName("com.mysql.jdbc.Driver");
                String database = "jdbc:mysql://localhost:3306/BusManagement";
                Connection con = DriverManager.getConnection(url, username1, password);
                // Assuming conn is your database connection
                String sql = "SELECT * FROM schedule WHERE scheduleId=?";
                PreparedStatement st = con.prepareStatement(sql);
                st.setInt(1, Integer.parseInt(jTextField1.getText()));
                ResultSet r = st.executeQuery();

                while (r.next()) {

                    confirmationBusNo.setText(r.getString("Bus_No"));
                    confirmationDepatureDate.setText(r.getString("schedule_date"));
                    confirmationDepature.setText(r.getString("Depature"));
                    confirmationArrival.setText(r.getString("Arrival"));
                    confirmationDepatureTime.setText(r.getString("depature_Time"));
                    confirmationFare.setText("Rs. " + (Float.parseFloat(r.getString("Fare")) * ((Integer) jSpinner1.getValue()).floatValue()));

                }
                con.close();
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, ex);
            }

            try {
//

                String seatlabelstring = "";

                for (int i = 0; i < (int) jSpinner1.getValue(); i++) {

                    seatlabelstring += jComboBox1.getItemAt(i) + ",";

                }
                seatlabelstring = seatlabelstring.substring(0, seatlabelstring.length() - 1);
                confirmationSeatNo.setText(seatlabelstring);

            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null, ex);
            }

            int count = (int) jSpinner1.getValue();
            String[] selectedRows = new String[count];

            Class.forName("com.mysql.jdbc.Driver");
            String database = "jdbc:mysql://localhost:3306/BusManagement";
            Connection con = DriverManager.getConnection(url, username1, password);

// Loop through the selected rows
            String seatnoquery = "SELECT * FROM seat WHERE SeatNo IN (";
            for (int i = 0; i < count; i++) {

                seatnoquery += jComboBox1.getItemAt(i) + ",";
            }
            seatnoquery = seatnoquery.substring(0, seatnoquery.length() - 1);
            seatnoquery += ")";

            PreparedStatement st2 = con.prepareStatement(seatnoquery);

            ResultSet r2 = st2.executeQuery();

            confirmationPane.setVisible(true);
            choosePane.setVisible(false);

        } catch (ClassNotFoundException ex) {
            Logger.getLogger(SeatBooking.class.getName()).log(Level.SEVERE, null, ex);

        } catch (SQLException ex) {
            Logger.getLogger(SeatBooking.class.getName()).log(Level.SEVERE, null, ex);
        }


    }//GEN-LAST:event_jButton3MouseClicked

    private void panelRound2MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelRound2MouseClicked
        MainPanel.removeAll();
        MainPanel.add(searchPane);
        MainPanel.repaint();
        MainPanel.revalidate();


    }//GEN-LAST:event_panelRound2MouseClicked

    private void panelRound3MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_panelRound3MouseClicked
        MainPanel.removeAll();
        MainPanel.add(cancellPane);
        MainPanel.repaint();
        MainPanel.revalidate();

        refreshActiveBooking();
//
//        try {
//
//            Class.forName("com.mysql.jdbc.Driver");
//            String database = "jdbc:mysql://localhost:3306/BusManagement";
//            Connection con = DriverManager.getConnection(url, username1, password);
//
//            String sql = "SELECT * FROM seat where status='booked'";
//
//            PreparedStatement st = con.prepareStatement(sql);
//
//            ResultSet r2 = st.executeQuery();
//
//            DefaultTableModel model2 = (DefaultTableModel) jTable3.getModel();
//            NewClass.fillTheTable(model2, r2);
//
//            con.close();
//        } catch (Exception e) {
//            JOptionPane.showMessageDialog(null, e);
//            e.printStackTrace();
//
//        }

    }//GEN-LAST:event_panelRound3MouseClicked

    private void jTable3MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jTable3MouseClicked
        int index = jTable3.getSelectedRow();
        TableModel model = jTable3.getModel();
        String bookingId = model.getValueAt(index, 0).toString();  //email is the 1th column in the table

        int primaryKeyValue = Integer.parseInt(model.getValueAt(index, 0).toString());

        String busno = model.getValueAt(index, 6).toString();
        String seat = model.getValueAt(index, 5).toString();
        jTextField4.setText(bookingId);
        jTextField3.setText(busno);
        jTextField5.setText(seat);
    }//GEN-LAST:event_jTable3MouseClicked

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        String seatno = NewClass.returnColumnValue("SeatNo", jTable3);
        String Bus_no = NewClass.returnColumnValue("Bus_No", jTable3);

        //int choice = JOptionPane.showConfirmDialog(null, "Is this your final decision?", "Confirmation", JOptionPane.YES_NO_OPTION);
        // if (choice == JOptionPane.YES_OPTION) {
        try {
            SimpleDateFormat dFormat = new SimpleDateFormat("yyyy-MM-dd");
            String jdate = dFormat.format(new Date());

            Class.forName("com.mysql.jdbc.Driver");
            String database = "jdbc:mysql://localhost:3306/BusManagement";
            Connection con = DriverManager.getConnection(url, username1, password);
//
            String sql = "UPDATE Seat SET Status = 'unbooked' where seatNo='" + jTextField5.getText() + "' AND Bus_No='" + jTextField3.getText() + "'";

            PreparedStatement st = con.prepareStatement(sql);
            st.executeUpdate();

            String sql3 = "INSERT INTO `cancellation`(`cancelledDate`, `bookingId`) VALUES (?, ?)";
            PreparedStatement st3 = con.prepareStatement(sql3);
            st3.setString(1, jdate); // Assuming jdate is a String containing the cancelled date
            st3.setString(2, jTextField4.getText()); // Assuming jTextField2 contains the booking ID
            st3.executeUpdate();

            refreshActiveBooking();

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
            e.printStackTrace();

        }
    }//GEN-LAST:event_jButton4ActionPerformed

    private void jButton5MouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton5MouseEntered
        // TODO add your handling code here:
        jButton5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/BackWithBoarder2.png")));
    }//GEN-LAST:event_jButton5MouseEntered

    private void jButton5MouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton5MouseExited
        // TODO add your handling code here:
        jButton5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/BackWithBoarder.png")));
    }//GEN-LAST:event_jButton5MouseExited

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton5ActionPerformed
        Customerdashboard cd = new Customerdashboard();
        cd.setVisible(true);
        this.dispose();


    }//GEN-LAST:event_jButton5ActionPerformed

    private void jButton5MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton5MouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton5MouseClicked

    private void depatureLocationActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_depatureLocationActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_depatureLocationActionPerformed

    private void jButton6ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton6ActionPerformed
//        try {
//            int UId = 0;
//
//            Class.forName("com.mysql.jdbc.Driver");
//            String database = "jdbc:mysql://localhost:3306/BusManagement";
//            Connection con = DriverManager.getConnection(url, username1, password);
//            Date Date = new Date();
////            SimpleDateFormat dFormat = new SimpleDateFormat("yyyy-MM-dd");
////            String bdate = dFormat.format(Date);
////
////            String sql = "INSERT INTO `booking`(`bookingDate`,`ScheduleId`,`seatNo`,`userId`)VALUES(\'" + bdate + "\'," + SId + "," + Integer.parseInt(confirmationSeatNo.getText()) + "," + UId + ");";
////            PreparedStatement st = con.prepareStatement(sql);
////
////            st.executeUpdate(sql);
////            
//            // Assuming conn is your database connection
//            String sql2 = "UPDATE Seat SET Status = 'booked' WHERE seatNo IN (" + confirmationSeatNo.getText() + ") AND Bus_No='" + confirmationBusNo.getText() + "'";
//            PreparedStatement pstmt = con.prepareStatement(sql2);
////            pstmt.setString(1, confirmationSeatNo.getText());
////            pstmt.setString(2, confirmationBusNo.getText());
//            pstmt.executeUpdate();
//
//            con.close();
//
//            JOptionPane.showMessageDialog(null, "Booking is confirmed", "Confirmation", JOptionPane.PLAIN_MESSAGE);
//
//            //Passing informations to generate QR code
//            //new GenerateQRCode(confirmationDepature.getText(),confirmationArrival.getText(),confirmationDepatureDate.getText(),confirmationDepatureTime.getText(),confirmationPassengerName.getText(),confirmationPassengerMobile.getText(),confirmationBusNo.getText(),confirmationSeatNo.getText(),confirmationFare.getText()).setVisible(true);
//        } catch (Exception ex) {
//            JOptionPane.showMessageDialog(null, ex);
//        }

        String busNo = confirmationBusNo.getText();
        String[] seatNumbers = confirmationSeatNo.getText().split(",");

        // SQL statement to update Seat table
        String sqlUpdateSeat = "UPDATE Seat SET Status = 'booked' WHERE seatNo IN (" + confirmationSeatNo.getText() + ") AND Bus_No=?";

        // SQL statement to insert into Booking table
        String sqlInsertBooking = "INSERT INTO booking (bookingDate, ScheduleId, seatNo) VALUES (?, ?, ?)";

        try {
            try {
                Class.forName("com.mysql.jdbc.Driver");
            } catch (ClassNotFoundException ex) {
                Logger.getLogger(SeatBooking.class.getName()).log(Level.SEVERE, null, ex);
            }
            String database = "jdbc:mysql://localhost:3306/BusManagement";
            Connection con = DriverManager.getConnection(database, "root", "root123");
            // Prepare the update statement for Seat table
            PreparedStatement updateSeatStmt = con.prepareStatement(sqlUpdateSeat);
            updateSeatStmt.setString(1, busNo);
            updateSeatStmt.executeUpdate();

            // Prepare the insert statement for Booking table
            PreparedStatement insertBookingStmt = con.prepareStatement(sqlInsertBooking);

            SimpleDateFormat dFormat = new SimpleDateFormat("yyyy-MM-dd");
            String jdate = dFormat.format(new Date());
            // Loop through each seat number
            for (String seatNo : seatNumbers) {
                // Assuming you have bookingDate and scheduleId defined elsewhere
                // Set values for the insert statement
                insertBookingStmt.setString(1, jdate);
                insertBookingStmt.setInt(2, Integer.parseInt(jTextField1.getText()));

                insertBookingStmt.setInt(3, Integer.parseInt(seatNo.trim())); // trim() removes leading/trailing whitespace

                // Execute the insertion
                insertBookingStmt.executeUpdate();
            }

            // Close the statements
            updateSeatStmt.close();
            insertBookingStmt.close();

            JOptionPane.showMessageDialog(null, "Booking is confirmed", "Confirmation", JOptionPane.PLAIN_MESSAGE);
        } catch (SQLException e) {
            e.printStackTrace(); // Handle exception appropriately
        }

        DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();
        DefaultTableModel model2 = (DefaultTableModel) jTable2.getModel();

        model1.setRowCount(0);
        model2.setRowCount(0);
        MainPanel.setVisible(true);
        choosePane.setVisible(false);
        confirmationPane.setVisible(false);

        jComboBox1.removeAllItems();
        jTextField1.setText("");
        journeyDate.clear();
        jSpinner1.setValue(1);


    }//GEN-LAST:event_jButton6ActionPerformed

    private void jButton7ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton7ActionPerformed
        searchPane.setVisible(false);
        choosePane.setVisible(true);
        confirmationPane.setVisible(false);
    }//GEN-LAST:event_jButton7ActionPerformed

    private void jButton8MouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton8MouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton8MouseClicked

    private void jButton8MouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton8MouseEntered
        // TODO add your handling code here:
        jButton8.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/BackWithBoarder2.png")));
    }//GEN-LAST:event_jButton8MouseEntered

    private void jButton8MouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButton8MouseExited
        // TODO add your handling code here:
        jButton8.setIcon(new javax.swing.ImageIcon(getClass().getResource("/UI/Images/BackWithBoarder.png")));
    }//GEN-LAST:event_jButton8MouseExited

    private void jButton8ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton8ActionPerformed
        searchPane.setVisible(true);
        choosePane.setVisible(false);
        confirmationPane.setVisible(false);

        jSpinner1.setValue(1);
        jComboBox1.removeAllItems();
        journeyDate.clear();
        jTextField1.setText("");

        DefaultTableModel model1 = (DefaultTableModel) jTable1.getModel();
        DefaultTableModel model2 = (DefaultTableModel) jTable2.getModel();

        model1.setRowCount(0);
        model2.setRowCount(0);

    }//GEN-LAST:event_jButton8ActionPerformed

    private void jButton9ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton9ActionPerformed
        try {
            Class.forName("com.mysql.jdbc.Driver");
            String database = "jdbc:mysql://localhost:3306/BusManagement";
            Connection con = DriverManager.getConnection(url, username1, password);

            LocalDate selectedDate = journeyDate.getDate();
            DateTimeFormatter formatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");
            String jdate = selectedDate.format(formatter);

            String sql = "SELECT * FROM schedule WHERE Depature=? AND Arrival=? AND schedule_date=?";
            PreparedStatement st = con.prepareStatement(sql);

            st.setString(1, depatureLocation.getSelectedItem().toString());
            st.setString(2, arrivalLocation.getSelectedItem().toString());
            st.setString(3, jdate);

            ResultSet r = st.executeQuery();

            DefaultTableModel model = (DefaultTableModel) jTable1.getModel();
            NewClass.fillTheTable(model, r);
            con.close();

            main.removeAll();
            main.add(child2);
            main.repaint();
            main.revalidate();

        } catch (SQLException se) {
            System.err.println(se.getMessage());
        } catch (Exception ex) {
            //Error Massage
            System.err.println(ex.getMessage());
            JOptionPane.showMessageDialog(null, "Choose the date");
        }

    }//GEN-LAST:event_jButton9ActionPerformed

    private void jButton10ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton10ActionPerformed

        try {
            //Class.forName("com.mysql.jdbc.Driver"); 
            String database = "jdbc:mysql://localhost:3306/BusManagement";
            Connection con = DriverManager.getConnection(url, username1, password);
            String sql = "select * FROM seat " + "where Bus_No = (select Bus_No from schedule where scheduleId=?) AND status='Unbooked' ; ";
            PreparedStatement st = con.prepareStatement(sql);

            st.setInt(1, Integer.parseInt(jTextField1.getText().toString()));

            ResultSet r = st.executeQuery();

            DefaultTableModel model = (DefaultTableModel) jTable2.getModel();
            NewClass.fillTheTable(model, r);

            choosePane.setVisible(true);
            searchPane.setVisible(false);
            //SId=Integer.parseInt(scheduleId.getSelectedItem().toString());
//            while(r.next()){
//                //seat.addItem(r.getString("seatNo"));
//            }
//            
            con.close();
        } catch (SQLException se) {
            System.err.println(se.getMessage());
        } catch (Exception ex) {
            System.err.println(ex.getMessage());
            JOptionPane.showMessageDialog(null, ex);
        }
    }//GEN-LAST:event_jButton10ActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jButton3ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SeatBooking.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SeatBooking.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SeatBooking.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SeatBooking.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new SeatBooking().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private UI.Images.PanelRound MainPanel;
    private javax.swing.JComboBox<String> arrivalLocation;
    private UI.Images.PanelRound cancellPane;
    private javax.swing.JPanel child1;
    private javax.swing.JPanel child2;
    private UI.Images.PanelRound choosePane;
    private javax.swing.JLabel confirmationArrival;
    private javax.swing.JLabel confirmationBusNo;
    private javax.swing.JLabel confirmationDepature;
    private javax.swing.JLabel confirmationDepatureDate;
    private javax.swing.JLabel confirmationDepatureTime;
    private javax.swing.JLabel confirmationFare;
    private UI.Images.PanelRound confirmationPane;
    private javax.swing.JLabel confirmationPassengerMobile;
    private javax.swing.JLabel confirmationPassengerName;
    private javax.swing.JLabel confirmationSeatNo;
    private javax.swing.JComboBox<String> depatureLocation;
    private javax.swing.JButton jButton10;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JButton jButton6;
    private javax.swing.JButton jButton7;
    private javax.swing.JButton jButton8;
    private javax.swing.JButton jButton9;
    private javax.swing.JComboBox<String> jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JSpinner jSpinner1;
    private javax.swing.JTable jTable1;
    private javax.swing.JTable jTable2;
    private javax.swing.JTable jTable3;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField3;
    private javax.swing.JTextField jTextField4;
    private javax.swing.JTextField jTextField5;
    private com.github.lgooddatepicker.components.DatePicker journeyDate;
    private javax.swing.JPanel main;
    private UI.Images.PanelRound panelRound1;
    private UI.Images.PanelRound panelRound2;
    private UI.Images.PanelRound panelRound3;
    private UI.Images.PanelRound panelRound4;
    private UI.Images.PanelRound searchPane;
    // End of variables declaration//GEN-END:variables
}
